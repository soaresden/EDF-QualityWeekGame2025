<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Jeu p√©dagogique: Contr√¥le Qualit√© Syst√®mes √âoliens Marins">
  <meta name="theme-color" content="#09367A">
  
  <title>üîç Quality Control - Offshore Wind Game</title>
  
  <!-- Styles -->
  <link rel="stylesheet" href="./css/main.css">
  <link rel="stylesheet" href="./css/animations.css">
</head>
<body>
  <!-- HEADER AVEC LOGOS ET TITRE -->
  <div style="position: fixed; top: 0; left: 0; right: 0; padding: 20px; background: linear-gradient(135deg, #09367A 0%, #00A8E9 100%); z-index: 1001; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
    <div style="max-width: 1400px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 20px;">
      <!-- Logo gauche -->
      <img src="./img/COU.png" alt="Logo" style="height: 50px; object-fit: contain;">
      
      <!-- Titre au centre -->
      <div style="flex: 1; text-align: center; color: white;">
        <h1 style="margin: 0; font-size: 1.5rem; font-weight: bold; letter-spacing: 1px;">EDF Power Solutions - Quality Week 2025</h1>
        <p style="margin: 3px 0 0 0; font-size: 0.9rem; opacity: 0.95; font-style: italic;">The Quality Inspector Game</p>
      </div>
      
      <!-- Logo droite -->
      <img src="./img/EDFPS.jfif" alt="EDF" style="height: 50px; object-fit: contain;">
    </div>
  </div>

  <!-- Conteneur principal -->
  <div class="game-container" style="margin-top: 110px;">
    <div id="gameRoot"></div>
  </div>

  <!-- Popup feedback (non-bloquant) -->
  <div id="popupFeedback" class="popup-feedback" style="display: none;"></div>

  <!-- √âCRAN S√âLECTION LANGUE -->
  <div id="languageScreen" class="modal-overlay">
    <div class="modal" style="max-width: 400px;">
      <h1 id="langTitle">üåê LANGUAGE</h1>
      <p id="langSubtitle" style="margin-bottom: 32px;">Select your language</p>
      <div class="lang-selector">
        <div class="lang-button" onclick="setLanguage('fr')">üá´üá∑<br><strong>Fran√ßais</strong></div>
        <div class="lang-button" onclick="setLanguage('en')">üá¨üáß<br><strong>English</strong></div>
      </div>
    </div>
  </div>

  <!-- √âCRAN NOM DU JOUEUR -->
  <div id="playerNameScreen" class="modal-overlay hidden">
    <div class="modal" style="max-width: 500px;">
      <h1 id="nameTitle">üë§ Your Name</h1>
      <p id="nameSubtitle" style="margin-bottom: 20px;">Enter your name for the leaderboard:</p>
      <input type="text" id="playerNameInput" class="input-field" maxlength="30" placeholder="Your name">
      <button class="button-primary" onclick="confirmPlayerName()">START GAME ‚Üí</button>
    </div>
  </div>

  <!-- √âCRAN INTRO -->
  <div id="introScreen" class="modal-overlay hidden">
    <div class="modal" style="max-width: 800px;">
      <h1 id="introTitle">üîç QUALITY CONTROL</h1>
      <h2 id="introSubtitle">Offshore Wind Systems</h2>
      
      <p id="introObjective" style="margin-top: 24px;"><strong>üéØ Goal:</strong></p>
      
      <div class="rules" style="margin-bottom: 24px;">
        <p id="rule1">üîç Find defects with the TINY magnifier</p>
        <p id="rule2">‚è±Ô∏è Stay 3+ seconds on a defect to reveal it</p>
        <p id="rule3">‚úì Validate your inspection (good/reject/doubtful)</p>
        <p id="rule4">üí∞ Reach 2000‚Ç¨/day to progress</p>
        <p id="rule5" style="margin-bottom: 0;">üöÄ Each day: more defects, less time!</p>
      </div>

      <table class="defect-table">
        <thead>
          <tr>
            <th>‚ö†Ô∏è MINOR</th>
            <th>‚ö†Ô∏è MEDIUM</th>
            <th>‚ùå MAJOR</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <span class="severity-badge severity-low">Scratch</span><br>
              <span class="severity-badge severity-low">Minor wear</span>
            </td>
            <td>
              <span class="severity-badge severity-medium">Crack</span><br>
              <span class="severity-badge severity-medium">Misalignment</span>
            </td>
            <td>
              <span class="severity-badge severity-high">Corrosion</span><br>
              <span class="severity-badge severity-high">Leak</span>
            </td>
          </tr>
        </tbody>
      </table>

      <button class="button-primary" onclick="startGameplay()">I UNDERSTAND ‚Üí</button>
    </div>
  </div>

  <!-- √âCRAN JEU PRINCIPAL -->
  <div id="gameScreen" class="modal-overlay hidden">
    <div class="modal" style="width: 95vw; max-width: 1100px; height: 90vh; display: flex; flex-direction: column; padding: 0;">
      
      <!-- En-t√™te du jeu -->
      <div class="screen-header" style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 16px; margin: 0; border-radius: 0; padding: 16px;">
        <div>
          <div class="stat-label">Day</div>
          <div class="stat-value" id="dayDisplay">1</div>
        </div>
        <div>
          <div class="stat-label">Time Left</div>
          <div class="stat-value" id="timeDisplay">8h 00m</div>
        </div>
        <div>
          <div class="stat-label">Money</div>
          <div class="stat-value" style="color: #10B981;" id="moneyDisplay">2500‚Ç¨</div>
        </div>
        <div>
          <div class="stat-label">Quota Target</div>
          <div class="stat-value" style="color: #00A8E9;" id="quotaDisplay">2000‚Ç¨</div>
        </div>
      </div>

      <!-- Zone de jeu - STYLE TETRIS -->
      <div style="flex: 1; display: flex; gap: 16px; padding: 16px; background: #f9fafb;">
        
        <!-- R√âSERVE (gauche) - 3 produits √† venir -->
        <div style="width: 120px; display: flex; flex-direction: column; gap: 12px;">
          <h4 style="margin: 0; color: #666; font-size: 0.85rem; text-transform: uppercase;">NEXT</h4>
          <div id="reserveProducts" style="display: flex; flex-direction: column; gap: 12px; flex: 1;">
            <!-- Produits de r√©serve g√©n√©r√©s ici -->
          </div>
        </div>

        <!-- INSPECTION (milieu) - Le produit courant -->
        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <div id="currentProductCard" style="width: 100%; max-width: 300px; background: white; border: 3px solid #00A8E9; border-radius: 16px; padding: 24px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
            <div style="font-size: 4rem; margin-bottom: 16px;">üì¶</div>
            <h3 id="currentProductName" style="margin: 0 0 12px 0; font-size: 1.3rem; color: #09367A;">Product Name</h3>
            <p id="currentProductValue" style="margin: 0 0 16px 0; font-size: 1.2rem; color: #00A8E9; font-weight: bold;">‚Ç¨100</p>
            <p id="defectStatus" style="margin: 0 0 24px 0; color: #666; font-size: 0.95rem;">Scanning... (0/3)</p>
            
            <!-- Barre de scanning -->
            <div style="width: 100%; height: 6px; background: #ddd; border-radius: 10px; overflow: hidden; margin-bottom: 24px;">
              <div id="scanningBar" style="height: 100%; width: 0%; background: linear-gradient(90deg, #10B981, #00A8E9); transition: width 0.2s ease-out;"></div>
            </div>

            <!-- Boutons d√©cision -->
            <div id="decisionButtons" style="display: flex; gap: 8px; margin-top: 16px;">
              <button class="decision-btn good" onclick="makeDecision('good')" style="flex: 1;">‚úì GOOD</button>
              <button class="decision-btn reject" onclick="makeDecision('reject')" style="flex: 1;">‚úó REJECT</button>
              <button class="decision-btn doubt" onclick="makeDecision('doubt')" style="flex: 1;">? DOUBTFUL</button>
            </div>
          </div>
        </div>

        <!-- STATS (droite) - Statistiques -->
        <div style="width: 120px; display: flex; flex-direction: column; gap: 12px;">
          <h4 style="margin: 0; color: #666; font-size: 0.85rem; text-transform: uppercase;">STATS</h4>
          
          <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #10B981;">
            <div style="font-size: 0.75rem; color: #999; margin-bottom: 4px;">Accepted</div>
            <div style="font-size: 1.5rem; font-weight: bold; color: #10B981;" id="acceptedCount">0</div>
          </div>

          <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #EF4444;">
            <div style="font-size: 0.75rem; color: #999; margin-bottom: 4px;">Rejected</div>
            <div style="font-size: 1.5rem; font-weight: bold; color: #EF4444;" id="rejectedCount">0</div>
          </div>

          <div style="background: white; padding: 12px; border-radius: 8px; border-left: 4px solid #F59E0B;">
            <div style="font-size: 0.75rem; color: #999; margin-bottom: 4px;">Accuracy</div>
            <div style="font-size: 1.5rem; font-weight: bold; color: #F59E0B;" id="accuracyCount">--%</div>
          </div>
        </div>

      </div>
    </div>
  </div>

  <!-- √âCRAN FIN DE JOURN√âE -->
  <div id="dayEndScreen" class="modal-overlay hidden">
    <div class="modal" style="max-width: 600px;">
      <h1 id="dayEndTitle">üìä END OF DAY</h1>
      
      <div class="stats-grid" style="margin-bottom: 32px;">
        <div class="stat-card">
          <div class="stat-label">Revenue</div>
          <div class="stat-value" id="dayRevenue">0‚Ç¨</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Salary</div>
          <div class="stat-value">150‚Ç¨</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Charges</div>
          <div class="stat-value">-400‚Ç¨</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" style="color: #10B981;">Day Balance</div>
          <div class="stat-value" style="color: #10B981;" id="dayBalance">0‚Ç¨</div>
        </div>
      </div>

      <div class="stats-grid" style="margin-bottom: 32px;">
        <div class="stat-card">
          <div class="stat-label">Accuracy</div>
          <div class="stat-value" id="accuracyDisplay">0%</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Accepted</div>
          <div class="stat-value" id="acceptedDisplay">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Rejected</div>
          <div class="stat-value" id="rejectedDisplay">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" style="color: #09367A;">Total Balance</div>
          <div class="stat-value" style="color: #09367A;" id="totalBalance">0‚Ç¨</div>
        </div>
      </div>

      <!-- Upgrades Section -->
      <h3 style="margin-bottom: 20px;">üõ†Ô∏è UPGRADES</h3>
      <div id="upgradesContainer" style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 24px;">
        <!-- Upgrades seront g√©n√©r√©s ici -->
      </div>

      <button class="button-primary" onclick="nextDay()">NEXT DAY ‚Üí</button>
    </div>
  </div>

  <!-- √âCRAN VICTOIRE / FAILLITE -->
  <div id="gameOverScreen" class="modal-overlay hidden">
    <div class="modal" style="max-width: 500px; text-align: center;">
      <h1 id="gameOverTitle">üí∏ BANKRUPT!</h1>
      <p id="gameOverSubtitle" style="font-size: 1.1rem; margin-bottom: 32px;">You didn't have enough...</p>
      
      <div class="card highlight" style="margin-bottom: 32px;">
        <div class="stat-label">Final Balance</div>
        <div class="stat-value" id="finalBalance">0‚Ç¨</div>
      </div>

      <div id="leaderboardDisplay" style="margin-bottom: 32px;"></div>

      <button class="button-primary" onclick="location.reload()">RESTART</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="./js/i18n.js"></script>
  <script src="./js/game.js"></script>
  <script src="./js/ui.js"></script>
  <script src="./js/app.js"></script>
</body>
</html>